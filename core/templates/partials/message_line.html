<div id="message-{{ message.pk }}" 
     class="flex flex-col {% if message.sender == request.user %}items-end{% else %}items-start{% endif %} mb-6 animate-in fade-in slide-in-from-bottom-2 duration-300">
    
    {# Metadata: Sender & Time #}
    <div class="flex items-center gap-2 mb-1 px-1">
        {% if message.sender != request.user %}
            <span class="text-[9px] font-black uppercase text-indigo-600 dark:text-indigo-400">
                @{{ message.sender.username }}
            </span>
        {% endif %}
        <span class="text-[8px] font-bold text-slate-400 uppercase">
            {{ message.timestamp|date:"H:i" }}
        </span>
    </div>

    {# Message Bubble #}
    <div class="relative max-w-[80%] md:max-w-[70%] p-4 border-2 border-black 
        {% if message.sender == request.user %}
            bg-indigo-600 text-white shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]
        {% else %}
            bg-white dark:bg-slate-800 text-black dark:text-white shadow-[4px_4px_0px_0px_rgba(79,70,229,0.3)]
        {% endif %}">
        
        <p class="text-sm m-0 leading-relaxed font-medium">
            {{ message.body }}
        </p>

        {% if message.attachment %}
            <div class="mt-3 pt-3 border-t border-black/10">
                <a href="{{ message.attachment.url }}" target="_blank" 
                   class="flex items-center gap-2 text-[10px] font-black uppercase no-underline {% if message.sender == request.user %}text-white/80 hover:text-white{% else %}text-indigo-600 hover:text-indigo-800{% endif %}">
                    <i class="fas fa-paperclip"></i> View_Attachment
                </a>
            </div>
        {% endif %}
    </div>
</div>